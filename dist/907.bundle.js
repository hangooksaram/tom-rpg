"use strict";(self.webpackChunktom_rpg=self.webpackChunktom_rpg||[]).push([[907],{486:(t,e,i)=>{i.d(e,{I:()=>p});var n=i(353);const s=(0,i(977).ZF)({apiKey:"AIzaSyAJOnRSM91EGjZ5mE4MTifMvgETiMRy9Qc",authDomain:"tom-rpg-db.firebaseapp.com",projectId:"tom-rpg-db",storageBucket:"tom-rpg-db.appspot.com",messagingSenderId:"682024612709",appId:"1:682024612709:web:9ae6b46fe7880e9a00278c"}),o=new n.hJ;var a,r,d=i(188),h=i(421),c=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function a(t){try{d(n.next(t))}catch(t){o(t)}}function r(t){try{d(n.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,r)}d((n=n.apply(t,e||[])).next())}))},l=function(t,e,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,i):s?s.value=i:e.set(t,i),i},u=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class m{static getInstance(){return m.instance||(m.instance=new m),m.instance}constructor(){a.set(this,void 0),r.set(this,void 0),l(this,a,(0,n.v0)(s),"f"),this.initialize()}get user(){return u(this,r,"f")}initialize(){return c(this,void 0,void 0,(function*(){(0,n.Aj)(u(this,a,"f"),(t=>c(this,void 0,void 0,(function*(){}))))}))}signIn(){console.log("is?"),(0,n.rh)(u(this,a,"f"),o).then((t=>{l(this,r,t.user,"f"),(()=>{c(this,void 0,void 0,(function*(){yield h.f.saveData(),d.H.start()}))})()})).catch((t=>{t.code,t.message,t.customData.email,n.hJ.credentialFromError(t)}))}signOutFn(){(0,n.w7)(u(this,a,"f")).then((()=>{})).catch((t=>{}))}}a=new WeakMap,r=new WeakMap;const p=m.getInstance()},669:(t,e,i)=>{i.d(e,{u:()=>n});class n{constructor(){var t;this.el=document.createElement("div"),this.el.id="modal",this.textEl=document.createElement("div"),null===(t=document.getElementById("root"))||void 0===t||t.appendChild(this.el),this.textEl.id="text",this.buttonsEl=document.createElement("div"),this.buttonsEl.id="buttons",this.el.appendChild(this.textEl),this.el.appendChild(this.buttonsEl),this.addHideModalEventToButtons()}setText(t){this.textEl.innerHTML=t}setButtons(t){t.forEach((t=>{this.buttonsEl.appendChild(t)}))}addHideModalEventToButtons(){var t;null===(t=Array.from(document.getElementsByTagName("button")))||void 0===t||t.forEach((t=>{t.addEventListener("click",(()=>{this.hideModal()}))}))}hideModal(){var t;null===(t=document.getElementById("root"))||void 0===t||t.removeChild(this.el)}}},166:(t,e,i)=>{i.d(e,{O:()=>o});var n=i(421);class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}constructor(){this.gold=20}initialize(){return t=this,e=void 0,s=function*(){const t=yield n.f.getServerData();this.gold="string"!=typeof t&&Object(t).hasOwnProperty("inventory")?t.inventory.gold:20,document.getElementById("gold").innerHTML=`${this.gold}G`},new((i=void 0)||(i=Promise))((function(n,o){function a(t){try{d(s.next(t))}catch(t){o(t)}}function r(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,r)}d((s=s.apply(t,e||[])).next())}));var t,e,i,s}addGold(t){this.gold+=t}setGold(t){this.gold=t}}const o=s.getInstance()},673:(t,e,i)=>{i.d(e,{G:()=>o,X:()=>s});var n=i(166);const s=(t,e)=>{const i=document.createElement("div");i.innerHTML=`+ ${e}`,i.classList.add("add-gold");const s=document.getElementById(`hit-animation-container-${t}`);s.appendChild(i),setTimeout((()=>{s.removeChild(i)}),1e3),document.getElementById("gold").innerHTML=`${n.O.gold}G`},o=()=>{var t;const e=document.createElement("div");e.id="overlay";const i=()=>{var t;return null===(t=document.getElementById("inventory"))||void 0===t?void 0:t.classList.toggle("hidden")};if(null===(t=document.getElementById("inventory"))||void 0===t?void 0:t.classList.contains("hidden"))return i(),e.classList.add("overlay"),document.body.appendChild(e),void e.addEventListener("click",(()=>{o()}));i(),document.body.removeChild(document.getElementById("overlay"))}},427:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(205),s=i(223),o=i(444),a=i(818),r=i(849);class d{constructor(t,e,i,n){this.currentMapId="",this.nextMapId="",this.mapEl=t,this.direction=e,this.currentMapId=i,this.nextMapId=n;const s=document.createElement("div");s.classList.add("portal"),s.classList.add(e),t.appendChild(s),s.addEventListener("click",(()=>{this.moveToNextMap(this.nextMapId)}))}moveToNextMap(t){if(document.getElementById("map-container"),document.getElementById(this.currentMapId).style.display="none",n.X.mapsList.find((e=>e.id===t)))this.changeMap(!1);else{const e=new c(t,"south"===this.direction?this.currentMapId:void 0,"west"===this.direction?this.currentMapId:void 0,"north"===this.direction?this.currentMapId:void 0,"east"===this.direction?this.currentMapId:void 0);n.X.addMap(e),this.changeMap(!0)}n.X.setCurrentMap(t)}changeMap(t){var e;document.getElementById("map-id").innerHTML=`현재 맵 ID : ${this.nextMapId}`;const i=document.createElement("div");null===(e=document.getElementById("root"))||void 0===e||e.appendChild(i),i.classList.add("change-map-ui"),n.X.isChanging=!0,(0,r.aP)(),setTimeout((()=>{(0,r.Ww)()}),500),setTimeout((()=>{var t;null===(t=document.getElementById("root"))||void 0===t||t.removeChild(i),n.X.isChanging=!1}),1e3),document.getElementById(this.currentMapId).style.display="none",document.getElementById(this.nextMapId).style.display="block"}}const h=document.getElementById("map-container");class c{get viewport(){return{horizontal:document.getElementById(`${this.id}`).offsetWidth,vertical:document.getElementById(`${this.id}`).offsetHeight}}constructor(t,e,i,r,d){this.id=t,this.el=document.createElement("div"),this.el.classList.add("map"),this.el.id=`${this.id}`,this.northId=null!=e?e:(0,s.K)(),this.eastId=null!=i?i:(0,s.K)(),this.southId=null!=r?r:(0,s.K)(),this.westId=null!=d?d:(0,s.K)(),h.append(this.el),document.getElementById(this.id).addEventListener("mousedown",(t=>{n.X.isChanging||(o.h.move(t.clientX,t.clientY),(0,a.Q)({x:t.clientX,y:t.clientY}))})),this.createPortal()}createPortal(){new d(this.el,"north",this.id,this.northId),new d(this.el,"east",this.id,this.eastId),new d(this.el,"south",this.id,this.southId),new d(this.el,"west",this.id,this.westId)}}},308:(t,e,i)=>{i.d(e,{r:()=>o});var n=i(205),s=i(118);class o{constructor(t,e){var i;this.el=document.createElement("div"),this.position={x:0,y:0},this.nextPosition=null,this.speed={value:10,xSpeed:0,ySpeed:0},this.health=100,this.power=0,this.isHit=!1,this.id=e,this.el.id=e,this.el.classList.add(t),"complete"===document.readyState&&document.getElementById(null===(i=n.X.currentMap)||void 0===i?void 0:i.id).appendChild(this.el)}setPos({x:t,y:e}){this.position=Object.assign(Object.assign({},this.position),{x:t,y:e}),this.el.style.top=`${e}px`,this.el.style.left=`${t}px`}move(t,e){this.nextPosition={nextX:t,nextY:e},this.setSpeed(t,e),requestAnimationFrame((()=>{this.transfer()}))}transfer(){const{nextX:t,nextY:e}=this.nextPosition,{xSpeed:i,ySpeed:n}=this.speed;if(Math.abs(t-this.position.x)<10&&Math.abs(e-this.position.y)<10)return;const{x:s,y:o}=this.position;let a={x:s,y:o};this.position.x<t&&this.position.y<e&&(a={x:s+i,y:o+n}),this.position.x<t&&this.position.y>e&&(a={x:s+i,y:o-n}),this.position.x>t&&this.position.y<e&&(a={x:s-i,y:o+n}),this.position.x>t&&this.position.y>e&&(a={x:s-i,y:o-n}),this.setPos(a),requestAnimationFrame((()=>this.transfer()))}setSpeed(t,e){const i=(0,s.n$)(this.position.x,this.position.y,t,e);this.speed.xSpeed=Math.abs(t-this.position.x)/i*this.speed.value,this.speed.ySpeed=Math.abs(e-this.position.y)/i*this.speed.value}hit(t){this.health-=t}setPower(t){this.power=t}}},444:(t,e,i)=>{i.d(e,{h:()=>x});var n,s,o,a=i(308),r=i(975),d=i(205),h=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},c=function(t,e,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,i):s?s.value=i:e.set(t,i),i};class l extends a.r{constructor(t,e,i){super(t,e),n.add(this),s.set(this,void 0),this.power=i}init(){const t=x.position;this.setPos({x:t.x,y:t.y})}setPos(t){super.setPos(t),this.findTargetEnemy(),!h(this,s,"f")||this.isHit||h(this,n,"m",o).call(this)}destroy(){document.getElementById(this.id)&&document.getElementById(d.X.currentMap.id).removeChild(this.el)}findTargetEnemy(){c(this,s,r.Y.enemiesList.find((t=>Math.abs(t.position.x-this.position.x)<30&&Math.abs(t.position.y-this.position.y)<30)),"f")}transfer(){super.transfer();const{nextX:t,nextY:e}=this.nextPosition;Math.abs(t-this.position.x)<10&&Math.abs(e-this.position.y)<10&&this.destroy()}}s=new WeakMap,n=new WeakSet,o=function(){this.destroy(),this.isHit=!0,h(this,s,"f").hit(this.power),c(this,s,void 0,"f")};var u,m,p=i(818),v=i(421),y=i(669),f=i(166),w=i(118),g=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class E extends a.r{static getInstance(){return E.instance||(E.instance=new E("player","player")),E.instance}constructor(t,e){super(t,e),u.set(this,new p.K(this.el)),this.adjacentEnemy=void 0,m.set(this,{x:0,y:0}),document.getElementById("root").appendChild(this.el),this.maxHealth=150,this.health=150,this.power=10,this.maxMana=100,this.mana=100}reInitialize(){this.health=this.maxHealth,g(this,u,"f").setHpStatus(),document.getElementById("root").appendChild(this.el),f.O.setGold((0,w.Qh)(f.O.gold,20))}initialize(){return t=this,e=void 0,n=function*(){const t=yield v.f.getServerData();"string"!=typeof t?(this.health=t.player.health,this.setPos({x:t.player.position.x,y:t.player.position.y}),this.maxHealth=t.player.maxHealth,g(this,u,"f").setHpStatus()):this.setPos({x:0,y:0}),document.body.onmousemove=t=>{g(this,m,"f").x=t.clientX,g(this,m,"f").y=t.clientY}},new((i=void 0)||(i=Promise))((function(s,o){function a(t){try{d(n.next(t))}catch(t){o(t)}}function r(t){try{d(n.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,r)}d((n=n.apply(t,e||[])).next())}));var t,e,i,n}attack(){const t=new l("bullet",`bullet-${(new Date).toISOString()}`,this.power);this.el.classList.add("attack"),this.position.x<g(this,m,"f").x&&this.el.classList.add("reverse-direction"),this.position.x>g(this,m,"f").x&&this.el.classList.remove("reverse-direction"),t.init(),setTimeout((()=>{t.move(g(this,m,"f").x,g(this,m,"f").y)}),100),setTimeout((()=>{this.el.classList.remove("attack")}),500)}move(t,e){t<d.X.currentMap.viewport.horizontal-20&&e<d.X.currentMap.viewport.vertical-20&&(this.el.classList.add("move"),this.position.x<t?this.el.classList.add("reverse-direction"):this.position.x>t&&this.el.classList.remove("reverse-direction"),super.move(t,e))}setPos({x:t,y:e}){super.setPos({x:t,y:e}),this.findAdjacentEnemy(),!this.adjacentEnemy||this.isHit||this.hit()}hit(){const{power:t}=this.adjacentEnemy;super.hit(t),this.isHit=!0,g(this,u,"f").setHpStatus(),this.health<=0&&this.destroy(),g(this,u,"f").setHitAnimation(),g(this,u,"f").showHitDamage(t),setTimeout((()=>{this.isHit=!1}),1e3),this.adjacentEnemy=void 0}findAdjacentEnemy(){this.adjacentEnemy=r.Y.enemiesList.find((t=>Math.abs(t.position.x-this.position.x)<30&&Math.abs(t.position.y-this.position.y)<30))}transfer(){const{nextX:t,nextY:e}=this.nextPosition;Math.abs(t-this.position.x)<10&&Math.abs(e-this.position.y)<10&&setTimeout((()=>{this.el.classList.remove("move")}),300),super.transfer()}destroy(){document.getElementById("root").removeChild(this.el);const t=new y.u;t.setText("사망하셨습니다. 골드가 20% 차감된 상태로 부활합니다");const e=((t,e)=>{const i=document.createElement("button");return i.innerHTML="확인",i.addEventListener("click",(()=>e())),i})(0,(()=>{t.hideModal(),this.reInitialize()}));t.setButtons([e])}}u=new WeakMap,m=new WeakMap;const x=E.getInstance()},818:(t,e,i)=>{i.d(e,{K:()=>s,Q:()=>o});var n=i(444);class s{constructor(t){this.el=t}setHpStatus(){document.getElementsByClassName("player-hp")[0].style.height=n.h.health/n.h.maxHealth*150+"px"}setHitAnimation(){this.el.classList.add("hit"),setTimeout((()=>{this.el.classList.remove("hit")}),1e3)}showHitDamage(t){const e=document.createElement("div");this.el.id.includes("player")&&e.classList.add("player-hit-damage"),e.innerHTML=t.toString(),this.el.appendChild(e),setTimeout((()=>{this.el.removeChild(e)}),1e3)}}const o=t=>{var e;const i=document.createElement("div");i.style.position="absolute",i.style.zIndex="999",i.style.top=`${t.y}px`,i.style.left=`${t.x}px`,i.classList.add("clicked"),null===(e=document.getElementById("root"))||void 0===e||e.appendChild(i),setTimeout((()=>{var t;null===(t=document.getElementById("root"))||void 0===t||t.removeChild(i)}),1e3)}},421:(t,e,i)=>{i.d(e,{f:()=>l});var n,s=i(444),o=i(166);n=new WeakMap;const a=new class{constructor(){n.set(this,"https://tom-rpg-db-default-rtdb.firebaseio.com")}fetch(t){return e=this,i=void 0,o=function*(){try{return(yield fetch(`${function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)}(this,n,"f")}/${null==t?void 0:t.param}`,Object.assign({headers:(null==t?void 0:t.body)?{"Content-Type":"application/json"}:null==t?void 0:t.headers},t))).json()}catch(t){if(t instanceof Error)return t.message;throw new Error("unexpected error is occur")}},new((s=void 0)||(s=Promise))((function(t,n){function a(t){try{d(o.next(t))}catch(t){n(t)}}function r(t){try{d(o.throw(t))}catch(t){n(t)}}function d(e){var i;e.done?t(e.value):(i=e.value,i instanceof s?i:new s((function(t){t(i)}))).then(a,r)}d((o=o.apply(e,i||[])).next())}));var e,i,s,o}};var r=i(486),d=i(669),h=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function a(t){try{d(n.next(t))}catch(t){o(t)}}function r(t){try{d(n.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,r)}d((n=n.apply(t,e||[])).next())}))};class c{static getInstance(){return c.instance||(c.instance=new c),c.instance}getServerData(){var t,e;return h(this,void 0,void 0,(function*(){const i=yield null===(t=r.I.user)||void 0===t?void 0:t.getIdToken();return yield a.fetch({method:"GET",param:`users/${null===(e=r.I.user)||void 0===e?void 0:e.uid}.json?auth=${i}`})}))}saveData(){var t,e;return h(this,void 0,void 0,(function*(){const i=yield null===(t=r.I.user)||void 0===t?void 0:t.getIdToken();try{yield a.fetch({method:"PUT",param:`users/${null===(e=r.I.user)||void 0===e?void 0:e.uid}.json?auth=${i}`,body:JSON.stringify({user:r.I.user,player:s.h,inventory:o.O})})}catch(t){const e=new d.u;e.setText("저장이 실패하였습니다. 다시 시도해주세요."),setTimeout((()=>{e.hideModal()}),1e3)}}))}}const l=c.getInstance()},975:(t,e,i)=>{i.d(e,{Y:()=>s});class n{constructor(){this.enemies=[]}static getInstance(){return n.instance||(n.instance=new n),n.instance}get enemiesList(){return this.enemies}addEnemy(t){this.enemies.push(t)}deleteEnemy(t){this.enemies=this.enemies.filter((e=>e.id!==t))}deleteAllEnemies(){this.enemies=[]}}const s=n.getInstance()},205:(t,e,i)=>{i.d(e,{X:()=>s});class n{constructor(){this.maps=[],this.currentMap=void 0,this.prevMap=void 0,this.isChanging=!1}static getInstance(){return n.instance||(n.instance=new n),n.instance}get mapsList(){return this.maps}addMap(t){this.maps.push(t)}setPrevMap(t){this.prevMap=this.maps.find((e=>e.id===t))}setCurrentMap(t){this.currentMap=this.maps.find((e=>e.id===t))}}const s=n.getInstance()},118:(t,e,i)=>{i.d(e,{Qh:()=>r,i1:()=>o,n$:()=>s,xG:()=>a});var n=i(205);const s=(t,e,i,n)=>Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2)),o=t=>parseInt(t.toString()),a=()=>({x:o(Math.random()*n.X.currentMap.viewport.horizontal),y:o(Math.random()*n.X.currentMap.viewport.vertical)}),r=(t,e)=>t*((100-e)/100)},223:(t,e,i)=>{i.d(e,{K:()=>n});const n=()=>`map-${Date.now()}-${1e3*Math.random()}`},125:(t,e,i)=>{i.d(e,{J:()=>h});var n=i(486),s=i(188),o=i(673),a=i(444),r=i(818),d=i(205);const h=[()=>{var t;null===(t=document.getElementById("inventory-toggle-btn"))||void 0===t||t.addEventListener("click",(()=>{(0,o.G)()}))},()=>{var t;document.getElementById(null===(t=d.X.currentMap)||void 0===t?void 0:t.id).addEventListener("mousedown",(t=>{d.X.isChanging||(a.h.move(t.clientX,t.clientY),(0,r.Q)({x:t.clientX,y:t.clientY}))}))},()=>{document.addEventListener("keydown",(t=>{"a"!==t.key.toLowerCase()&&"ㅁ"!==t.key||a.h.attack()}))},()=>{document.getElementById("signin-button").addEventListener("click",(()=>{n.I.signIn()}))},()=>{document.getElementById("signout-button").addEventListener("click",(()=>{}))},()=>{var t;null===(t=document.getElementById("enter-game-button"))||void 0===t||t.addEventListener("click",(()=>{s.H.start()}))}]},849:(t,e,i)=>{i.d(e,{Ww:()=>I,aP:()=>T});var n=i(308),s=i(421),o=i(975),a=i(205),r=i(118),d=i(166),h=i(673),c=i(444);class l{constructor(t){this.el=t}setHpBar(t){const e=document.createElement("div");e.id=`${this.el.id}-hp-bar`,this.el.appendChild(e);const i={width:`${t}px`,height:"10px",backgroundColor:"red"};Object.assign(e.style,i)}decreaseHPBar(t){document.getElementById(`${this.el.id}-hp-bar`).style.width=`${t}px`}setHitAnimation(){var t;const e=document.createElement("div");e.classList.add("bullet-hit"),setTimeout((()=>{var t;null===(t=document.getElementById(this.el.id))||void 0===t||t.removeChild(e)}),1e3),null===(t=document.getElementById(this.el.id))||void 0===t||t.appendChild(e)}setDestoryAnimation(){this.el.classList.add("enemy-destroyed")}setHitAnimationContainer(){const t=document.createElement("div");t.id=`hit-animation-container-${this.el.id}`,Object.assign(t.style,Object.assign(Object.assign({},t.style),{position:"relative",width:"100%",height:"100%"})),this.el.appendChild(t)}}var u,m,p,v,y,f,w=function(t,e,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,i):s?s.value=i:e.set(t,i),i},g=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class E extends n.r{constructor(t){const{className:e,id:i,type:n,gold:s,health:o,power:a}=t;super(e,i),u.add(this),m.set(this,void 0),p.set(this,void 0),v.set(this,new l(this.el)),y.set(this,void 0),this.el.id=i,this.el.classList.add("enemy"),w(this,m,n,"f"),this.health=o,w(this,p,s,"f"),w(this,y,a,"f"),g(this,v,"f").setHitAnimationContainer(),this.setPos({x:(0,r.i1)(Math.random()*(0,r.xG)().x),y:(0,r.i1)(Math.random()*(0,r.xG)().y)}),g(this,v,"f").setHpBar(this.health),g(this,u,"m",f).call(this)}hit(t){super.hit(t),g(this,v,"f").decreaseHPBar(this.health),0!==this.health?g(this,v,"f").setHitAnimation():this.destroy()}destroy(){d.O.addGold(g(this,p,"f")),(0,h.X)(this.id,20),s.f.saveData(),g(this,v,"f").setDestoryAnimation(),document.getElementById(a.X.currentMap.id).removeChild(this.el),o.Y.deleteEnemy(this.id)}setPos({x:t,y:e}){if(super.setPos({x:t,y:e}),Math.abs(this.position.x-c.h.position.x)<30&&Math.abs(this.position.y-c.h.position.y)<30)return c.h.adjacentEnemy=this,void(c.h.isHit||c.h.hit())}}m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,u=new WeakSet,f=function(){setInterval((()=>{this.move((0,r.i1)(Math.random()*(0,r.xG)().x),(0,r.i1)(Math.random()*(0,r.xG)().y))}),1e4)};const x=[{type:"slime",health:20,probability:.7,gold:20,power:20},{type:"goblin",health:100,probability:.3,gold:100,power:50}],I=()=>{const t=(()=>{const t=Math.random();x.sort(((t,e)=>t.probability-e.probability));let e="slime",i=0;for(let n=0;n<x.length;n++)if(i+=x[n].probability,i>=t){e=x[n].type;break}return e})();M(t)},M=t=>{10!==o.Y.enemiesList.length&&(b(t),M(t))},b=t=>{const{health:e,gold:i,power:n}=x.find((e=>e.type===t)),s=new E({className:`${t}`,id:`${t}-${(new Date).toISOString()}`,type:t,gold:i,health:e,power:n});o.Y.addEnemy(s)},T=()=>{o.Y.deleteAllEnemies(),Array.from(document.getElementsByClassName("enemy")).map((t=>{var e;null===(e=document.getElementById(a.X.currentMap.id))||void 0===e||e.removeChild(t)}))}}}]);